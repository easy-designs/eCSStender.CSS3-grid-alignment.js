/*------------------------------------------------------------------------------
Function:		eCSStender.CSS3-grid-alignment.polyfill.js
Author:			Aaron Gustafson (aaron at easy-designs dot net)
Homepage:		http://github.com/easy-designs/eCSStender.CSS3-grid-alignment.js
License:		MIT License 
------------------------------------------------------------------------------*/
(function(U){if(typeof U=="undefined"){return}var ae,af=null,S=true,A=false,O=window,ax=document,d=ax.documentElement,q="property",B="-moz-",h="-ms-",J="-o-",ad="-webkit-",u=" ",n=".",at=":",a=";",ah="{",s="}",an="-",N="",aE="auto",X="none",y="display",r="position",m="relative",aD="static",az="absolute",I="width",aw="height",ab="padding",K="margin",av="border",g="-style",l="top",ar="bottom",b="left",k="right",G="min-",aa="max-",Y="px",x="fr",aq="content-box",Z="padding-box",ao="stretch",i="grid",ay="inline-grid",o="grid-columns",aC="grid-column",W="grid-column-span",ag="grid-column-align",w="grid-rows",C="grid-row",L="grid-row-span",f="grid-row-align",z="box-sizing",au="block-progression",P=0,F=S,ai=/\s+/,v=document.createElement("div"),R=af,ap={minWidth:{},maxWidth:{},minHeight:{},maxHeight:{},shrinkToFit:{}},c={auto:{keyword:aE},minContent:{keyword:"min-content"},maxContent:{keyword:"max-content"},fitContent:{keyword:"fit-content"},minmax:{keyword:"minmax"}},T={stretch:{keyword:ao},start:{keyword:"start"},end:{keyword:"end"},center:{keyword:"center"}},H={"static":{keyword:aD},relative:{keyword:m},absolute:{keyword:az},fixed:{keyword:"fixed"}},ak={tb:{keyword:"tb"},bt:{keyword:"bt"},lr:{keyword:"lr"},rl:{keyword:"rl"}},aA={valueAndUnit:{},keyword:{}},E=U.getCSSValue;function j(e){return e!=ae}function aB(){this.width=af;this.height=af}function ac(){this.value=af;this.unit=af}window.CSSGridAlignment=function(aH,e,aG,aI,aF){this.gridElement=aH;this.selector=e;this.properties=aG;this.media=aI;this.grid_items=aF;this.blockProgression=this.blockProgressionStringToEnum(E(aH,au));this.availableSpaceForColumns=af;this.availableSpaceForRows=af;this.items=af;this.columnTrackManager=new aj();this.rowTrackManager=new aj();this.useAlternateFractionalSizingForColumns=A;this.useAlternateFractionalSizingForRows=A;this.setup()};CSSGridAlignment.prototype={setup:function(){var aG=this.gridElement,aF=this.properties[o]||X,e=this.properties[w]||X;this.determineGridAvailableSpace();al.parseGridTracksString(aF,this.columnTrackManager);al.parseGridTracksString(e,this.rowTrackManager);this.mapGridItemsToTracks();this.saveItemPositioningTypes();this.determineTrackSizes(I);this.determineTrackSizes(aw);this.calculateGridItemShrinkToFitSizes();this.layout()},layout:function(){var aK=this.items,aI=aK.length,aO,aF,aJ,e,aP=N,aQ=N,aN=0,aM=(this.availableSpaceForRows.internalMeasure<1),aR=this.rowTrackManager.tracks,aG=0,aH=(this.availableSpaceForColumns.internalMeasure<1),aL=this.columnTrackManager.tracks;while(aI--){aO=aK[aI];aF=aO.styles;newclass=U.makeUniqueClass();U.addClass(aO.itemElement,newclass);aJ=this.getPosition(aO);e=this.getDimensions(aO);aP+=aF.selector+n+newclass+ah+r+at+az+a;aP+=l+at+aJ.top+a;aP+=b+at+aJ.left+a;aP+=I+at+e.width+Y+a;aP+=aw+at+e.height+Y+a;aP+=s}if(E(this.gridElement,r)==aD){aQ+=r+at+m+a}if(aM){aI=aR.length;while(aI--){aN+=aR[aI].measure.internalMeasure}aQ+=aw+at+aN+Y+a}if(aH){aI=aL.length;while(aI--){aG+=aL[aI].measure.internalMeasure}aQ+=I+at+aG+Y+a}if(aQ!=N){aP+=this.selector+ah+aQ+s}U.embedCSS(aP,this.media)},getPosition:function(aF){var e=aF.column-1,aG=aF.row-1,aH={top:0,left:0};while(e--){aH.left+=this.columnTrackManager.tracks[e].measure.internalMeasure}while(aG--){aH.top+=this.rowTrackManager.tracks[aG].measure.internalMeasure}aH.left+=Y;aH.top+=Y;return aH},getDimensions:function(aI){var aH=aI.shrinkToFitSize,e=aI.itemElement,aL={},aK={},aJ={},aG=[l,k,ar,b],aF=aG.length;aH={height:aH.height.internalMeasure,width:aH.width.internalMeasure};while(aF--){aL[aG[aF]]=parseInt(E(e,K+an+aG[aF]),10);aK[aG[aF]]=parseInt(E(e,ab+an+aG[aF]),10);aJ[aG[aF]]=parseInt(E(e,av+an+aG[aF]+an+I),10)}aH.height-=(aL.top+aL.bottom+aK.top+aK.bottom+aJ.top+aJ.bottom);aH.width-=(aL.left+aL.right+aK.left+aK.right+aJ.left+aJ.right);return aH},determineGridAvailableSpace:function(){var aW=this.gridElement,a6=aW.cloneNode(S),a7=this.properties,aO=aW.parentNode,e,aR="0px",a4=[l,k,ar,b],aU=a4.length,aF={},aV={},aI={},aL,a1,aY,aJ,aH,aP,a2,aS,aK,a5,aQ,a3,aG,a0,aX,aN,aM,aT,aZ;e=a7.display===ay?S:A;while(aU--){aF[a4[aU]]=E(aW,K+an+a4[aU]);aV[a4[aU]]=E(aW,ab+an+a4[aU]);aI[a4[aU]]=E(aW,av+an+a4[aU]+an+I)}a6.innerHTML=N;aO.insertBefore(a6,aW);a1=E(a6,I);if(a1==aR){a1=aE}if(a1==aE&&(e||E(aW,"float")!==X)){this.useAlternateFractionalSizingForColumns=S}aY=E(a6,aw);if(aY==aR){aY=aE}if(aY==aE){this.useAlternateFractionalSizingForRows=S}aO.removeChild(a6);a6=document.createElement(aW.tagName);aJ=a1!==aE?a1:this.determineSize(I,aF,aV,aI);aH=aY!==aE?aY:this.determineSize(aw,aF,aV,aI);a5=y+at+(!e?"block":"inline-block")+a+K+at+E(aW,K)+a+av+an+I+at+E(aW,av+an+I)+a+ab+at+E(aW,ab)+a+av+g+at+E(aW,av+g)+a+I+at+aJ+a+aw+at+aH+a+z+at+E(aW,z)+a+G+I+at+E(aW,G+I)+a+G+aw+at+E(aW,G+aw)+a+aa+I+at+E(aW,aa+I)+a+aa+aw+at+E(aW,aa+aw)+a;a6.style.cssText=a5;aQ=this.verticalScrollbarWidth();a3=this.horizontalScrollbarHeight();aO.insertBefore(a6,aW);aG=aO.removeChild(aW);a0=a1!==aE?0:aQ-this.verticalScrollbarWidth();aX=aY!==aE?0:a3-this.horizontalScrollbarHeight();aN=t.measureFromStyleProperty(a6,I);aM=t.measureFromStyleProperty(a6,aw);aT=t.measureFromPx(a0);aZ=t.measureFromPx(aX);if(!this.shouldSwapWidthAndHeight()){this.availableSpaceForColumns=aN.subtract(aT);this.availableSpaceForRows=aM.subtract(aZ)}else{this.availableSpaceForColumns=aM.subtract(aZ);this.availableSpaceForRows=aN.subtract(aT)}aO.insertBefore(aG,a6);aO.removeChild(a6)},determineSize:function(aL,aK,aJ,aI){var aH=this.gridElement.parentNode,aG=aL==I?b:l,e=aL==I?k:ar,aF=aL==I?aH.offsetWidth:aH.offsetHeight;aF-=E(aH,av+an+aG);aF-=E(aH,ab+an+aG);aF-=E(aH,ab+an+e);aF-=E(aH,av+an+e);aF-=(aK[aG]+aK[e]);aF-=(aI[aG]+aI[e]);aF-=(aJ[aG]+aJ[e]);return aF},verticalScrollbarWidth:function(){return(self.innerWidth-d.clientWidth)},horizontalScrollbarHeight:function(){return(self.innerHeight-d.clientHeight)},mapGridItemsToTracks:function(){var aM=[],aI=this.grid_items.length,aU,aG,aQ,aT,aN,aP,aL,aF,aO,e,aK,aJ,aS,aH,aR;while(aI--){aU=this.grid_items[aI];aG=parseInt(aU.details.properties[aC],10);if(isNaN(aG)){this.error=S;aG=1}aQ=parseInt(aU.details.properties[W],10);if(isNaN(aQ)){this.error=S;aQ=1}aT=parseInt(aU.details.properties[C],10);if(isNaN(aT)){this.error=S;aT=1}aN=parseInt(aU.details.properties[L],10);if(isNaN(aN)){this.error=S;aN=1}aP=aU.details.properties[ag]||N;if(aP.length===0){this.error=S}aL=this.gridAlignStringToEnum(aP);aF=aU.details.properties[f]||N;if(aF.length===0){this.error=S}aO=this.gridAlignStringToEnum(aF);e=E(aU.element,z);aK=new D();aK.itemElement=aU.element;aK.styles=aU.details;aK.column=aG;aK.columnSpan=aQ;aK.columnAlign=aL;aK.row=aT;aK.rowSpan=aN;aK.rowAlign=aO;aJ=aK.column;aS=aJ+aK.columnSpan-1;aH=aK.row;aR=aH+aK.rowSpan-1;this.ensureTracksExist(this.columnTrackManager,aJ,aS);this.ensureTracksExist(this.rowTrackManager,aH,aR);this.addItemToTracks(this.columnTrackManager,aK,aJ,aS);this.addItemToTracks(this.rowTrackManager,aK,aH,aR);aM.push(aK)}this.items=aM},gridAlignStringToEnum:function(e){switch(e){case T.start.keyword:return T.start;case T.end.keyword:return T.end;case T.center.keyword:return T.center;case T.stretch.keyword:case af:case N:return T.stretch;default:}},positionStringToEnum:function(e){switch(e){case H.relative.keyword:return H.relative;case H.absolute.keyword:return H.absolute;case H.fixed.keyword:return H.fixed;case H[aD].keyword:case af:case N:return H[aD];default:}},blockProgressionStringToEnum:function(e){switch(e){case ak.tb.keyword:case af:case N:return ak.tb;case ak.bt.keyword:return ak.bt;case ak.lr.keyword:return ak.lr;case ak.rl.keyword:return ak.rl;default:}},gridTrackValueStringToEnum:function(e){switch(e){case c.auto.keyword:return c.auto;case c.minContent.keyword:return c.minContent;case c.maxContent.keyword:return c.maxContent;case c.fitContent.keyword:return c.fitContent;default:}},ensureTracksExist:function(aF,e,aG){aF.ensureTracksExist(e,aG)},addItemToTracks:function(aH,aI,aF,aK){var aG=0,e=aH.tracks.length,aJ=0,aL=aH.implicitTracks;for(;aG<e;aG++){if(aH.tracks[aG].number===aF){aH.tracks[aG].items.push(aI)}else{if(aH.tracks[aG].number>aF){break}}}for(;aJ<aL;aJ++){if(aF>=aH.implicitTracks[aJ].firstNumber&&aK<=aH.implicitTracks[aJ].length){aH.implicitTracks[aJ].items.push(aI)}}},saveItemPositioningTypes:function(){var e=this.items,aF=e.length;while(aF--){if(e[aF].position===af){e[aF].position=this.positionStringToEnum(E(e[aF].itemElement,r))}}},determineTrackSizes:function(bb){var a2=(bb.toLowerCase()===I),a9=a2?this.columnTrackManager:this.rowTrackManager,aI=a2?this.availableSpaceForColumns:this.availableSpaceForRows,a7=a2?this.useAlternateFractionalSizingForColumns:this.useAlternateFractionalSizingForRows,aL=[],a3=[],aX=[],a0=S,aZ=a9.getIterator(),aF=aZ.next(),aY,ba,bd,aO,a8,aG,be,aQ,e,aN,aU,a5,aT,aK,aJ,aW,a1,a6,aP,aM,aS,a4,aH,aR,bc,aV;if(a7&&aI.getRawMeasure()==0){a0=A}while(aF!==af){if(aF.sizingType!==aA.keyword&&aF.sizingType!==aA.valueAndUnit){}aF.measure=t.zero();aF.minMeasure=t.zero();aF.maxMeasure=t.zero();ba=(a7&&this.trackIsFractionSized(aF));if(aF.sizingType===aA.keyword||ba){aY=aF.size;if(aY!==c.fitContent&&aY!==c.minContent&&aY!==c.maxContent&&aY!==c.auto&&!ba){}if(!ba){aF.contentSizedTrack=S}for(bd=0,aO=aF.items.length;bd<aO;bd++){a8=aF.items[bd];if(a8.position!==H[aD]&&a8.position!==H.relative){continue}if((a2?a8.columnSpan:a8.rowSpan)>1){if(a8.maxWidthMeasure===af){if(a2){a8.maxWidthMeasure=M.calcMaxWidth(a8.itemElement)}else{a8.maxHeightMeasure=M.calcMaxHeight(a8.itemElement,a8.usedWidthMeasure)}}if(aY===c.fitContent||aY===c.auto){aL.push(a8)}}else{if(!ba&&(aY===c.minContent||aY===c.fitContent||aY===c.auto)){if(a2){aG=M.calcMinWidth(a8.itemElement)}else{aG=M.calcMinHeight(a8.itemElement,a8.usedWidthMeasure)}if(aG.getRawMeasure()>aF.minMeasure.getRawMeasure()){aF.minMeasure=aG}}if(ba||aY===c.maxContent||aY===c.auto){if(a2){be=M.calcMaxWidth(a8.itemElement)}else{be=M.calcMaxHeight(a8.itemElement,a8.usedWidthMeasure)}if(be.getRawMeasure()>aF.maxMeasure.getRawMeasure()){aF.maxMeasure=be}}}}switch(aY){case c.maxContent:aQ=this.getActualTrackMeasure(trackNum,a2);if(aQ.equals(aF.maxMeasure)!==S){}aF.measure=aF.minMeasure=aF.maxMeasure;break;case c.minContent:aQ=this.getActualTrackMeasure(trackNum,a2);if(aQ.equals(aF.minMeasure)!==S){}aF.measure=aF.maxMeasure=aF.minMeasure;break;case c.fitContent:case c.auto:aF.measure=aF.minMeasure}}if(aF.sizingType===aA.keyword&&(aF.size===c.auto||aF.size===c.fitContent)){a3.push(aF)}if(aF.sizingType===aA.valueAndUnit){if(aF.size.unit===Y){aF.measure=aF.minMeasure=aF.maxMeasure=t.measureFromPx(aF.size.value)}else{if(aF.size.unit===x){aF.measure=t.zero();aX.push(aF)}else{this.error=S}}}aF=aZ.next()}e=aI.subtract(this.getSumOfTrackMeasures(a9));if(e.getRawMeasure()>0){a3.sort(this.compareAutoTracksAvailableGrowth);for(aN=0,aU=a3.length;aN<aU;aN++){if(e.getRawMeasure()<=0){break}a5=e.divide(a3.length-aN);a5=t.min(a5,a3[aN].maxMeasure.subtract(a3[aN].measure));a3[aN].measure=a3[aN].measure.add(a5);e=e.subtract(a5)}}for(bd=0,aO=aL.length;bd<aO&&e>0;bd++){aT=aL[bd];aK=(a2?aT.column:aT.row);aJ=(a2?aT.columnSpan:aT.rowSpan);if(!a9.spanIsInFractionalTrack(aK,aJ)){continue}aW=this.getSumOfSpannedTrackMeasures(a9,aK,aJ);a1=(a2===S?aT.maxWidthMeasure:aT.maxHeightMeasure).subtract(aW);if(a1.getRawMeasure()>0){tracksToGrow=this.getContentBasedTracksThatSpanCrosses(a9,aK,aJ);e=this.redistributeSpace(tracksToGrow,e,a1)}}if(aX.length>0&&(e.getRawMeasure()>0||a7)){if(!a7||a0){}aX.sort(this.compareFractionTracksNormalMeasure);a6=0;for(bd=0,aO=aX.length;bd<aO;bd++){a6+=aX[bd].size.value}aP=af;if(!a7){aP=e.divide(a6)}else{aP=this.determineMeasureOfOneFractionUnconstrained(aX)}aO=aX.length;if(a7){if(a0){aM=t.zero();for(bd=0;bd<aO;bd++){aM=aM.add(aP.multiply(aX[bd].size.value))}if(aM.getRawMeasure()>e.getRawMeasure()){aP=aP.multiply(e.divide(totalLengthToAdd.getRawMeasure()))}}for(bd=0;bd<aO;bd++){aX[bd].measure=aX[bd].measure.add(aP.multiply(aX[bd].size.value))}}else{if(aO>0){aS=this.getNormalFractionMeasure(aX[0]);a4=0;aH=0;for(bd=0;bd<aO;bd++){if(aS.getRawMeasure()<this.getNormalFractionMeasure(aX[bd]).getRawMeasure()){aH=a4;aR=this.getNormalFractionMeasure(aX[bd]).subtract(aS);for(bc=0;bc<bd;bc++){aV=0;if(aH>0){aV=e.multiply(aX[bc].size.value).divide(aH);aV=t.min(aV,aR.multiply(aX[bc].size.value));aV=t.min(aV,aX[bc].maxMeasure)}aX[bc].measure=fractionalColumnsArray[bc].measure.add(aV);e-=aV;aH-=aX[bc].size.value}aS=this.getNormalFractionMeasure(aX[bd])}a4+=aX[bd].size.value;if(e.getRawMeasure()<=0){break}}aH=a4;for(bd=0;bd<aO;bd++){aV=0;if(aH>0){aV=e.multiply(aX[bd].size.value/aH)}aX[bd].measure=aX[bd].measure.add(aV);e=e.subtract(aV);aH-=aX[bd].size.value}}}}if(a2){this.saveUsedCellWidths(a9)}},getActualTrackMeasure:function(e,aK){var aF,aI,aJ=this.gridElement,aG=v.cloneNode(S),aH="margin:0px;border:0px;padding:0px;"+(aK?ag:f)+at+ao+a+(aK?aC:C)+at+e+a;aG.style.cssText=aH;aG=aJ.appendChild(aG);aF=this.blockProgressionStringToEnum(E(this.gridElement,au));aI=this.usePhysicalWidths(aF,aK)?t.measureFromStyleProperty(aG,I):t.measureFromStyleProperty(aG,aw);aJ.removeChild(aG);return aI},compareAutoTracksAvailableGrowth:function(aG,e){var aH=aG.maxMeasure.subtract(aG.measure),aF=e.maxMeasure.subtract(e.measure);if(aH.getRawMeasure()<aF.getRawMeasure()){return -1}if(aH.getRawMeasure()>aF.getRawMeasure()){return 1}return 0},usePhysicalWidths:function(e,aG){var aF=A;if(((e===ak.tb||e===ak.bt)&&aG===S)||((e===ak.lr||e===ak.rl)&&aG===A)){aF=S}return aF},trackIsFractionSized:function(e){return(e.sizingType===aA.valueAndUnit&&e.size.unit===x)},getSumOfTrackMeasures:function(aH){var aG=t.zero(),aF=aH.getIterator(),e=aF.next();while(e!==af){aG=aG.add(e.measure);e=aF.next()}return aG},getSumOfSpannedTrackMeasures:function(aI,e,aJ){var aH=t.zero(),aF=aI.getTracks(e,e+aJ-1),aG=aF.length;while(aG--){aH=aH.add(aF[aG].measure)}return aH},getNormalFractionMeasure:function(e){if(!this.trackIsFractionSized(e)){}var aF=e.size.value;return aF===0?t.zero():e.measure.divide(aF)},determineMeasureOfOneFractionUnconstrained:function(aH){var aJ=t.zero(),aG=aH.length,aF,aI,e;while(aG--){aF=aH[aG];aI=aF.size.value;e=aF.maxMeasure.divide(aI);if(e.getRawMeasure()>aJ.getRawMeasure()){aJ=e}}return aJ},saveUsedCellWidths:function(aI){var e=aI.getIterator(),aF=e.next(),aG,aH;while(aF!==af){aG=aF.items.length;while(aG--){aH=aF.items[aG];if(aH.usedWidthMeasure===af){aH.usedWidthMeasure=this.getSumOfSpannedTrackMeasures(aI,aH.column,aH.columnSpan)}}aF=e.next()}},calculateGridItemShrinkToFitSizes:function(){var aN=this.columnTrackManager,aH=this.rowTrackManager,aI=this.items,aG,aF=aI.length,aO,aK,e,aL,aJ=af,aM=af;for(aG=0;aG<aF;aG++){aO=aI[aG];if(aO.shrinkToFitSize===af){aK=this.getSumOfSpannedTrackMeasures(this.columnTrackManager,aO.column,aO.columnSpan);e=this.getSumOfSpannedTrackMeasures(this.rowTrackManager,aO.row,aO.rowSpan);if(aO.position===H[aD]||aO.position===H.relative){aL=this.shouldSwapWidthAndHeight();if(aO.columnAlign===T.stretch){if(!aL){aJ=aK}else{aM=aK}}if(aO.rowAlign===T.stretch){if(!aL){aM=e}else{aJ=e}}}if(aJ===af||aM===af){aO.shrinkToFitSize=M.calcShrinkToFitWidthAndHeight(aO.itemElement,aK,e,aJ,aM)}else{aO.shrinkToFitSize=new aB()}if(aJ!==af){aO.shrinkToFitSize.width=aJ}if(aM!==af){aO.shrinkToFitSize.height=aM}}}},shouldSwapWidthAndHeight:function(){return(this.blockProgression===ak.lr||this.blockProgression===ak.rl)},verifyGridItemSizes:function(){this.verifyGridItemLengths(S);this.verifyGridItemLengths(A)},verifyGridItemLengths:function(aF){var aO=this.items,aR=aO.length,aG=aF?this.columnTrackManager:this.rowTrackManager,aH=this.blockProgression,aP=this.usePhysicalWidths(aH,aF),aT=aP?"Width":"Height",aU,aV,aN,aQ,aI,aM,aS,aK,aJ,aL,e;if(aF&&!aP){}else{if(!aF&&aP){}}while(aR--){aU=aO[aR];aV=aU.itemElement;if((aF?aU.verified.columnBreadth:aU.verified.rowBreadth)!==S){aN=aF?aU.column:aU.row;aQ=aF?aU.columnAlign:aU.rowAlign;aI=p["calcMarginBox"+aT](aV);aM=N;if(aU.itemElement.id.length>0){aM="[ID = "+aU.itemElement.id+"] "}aS=aU.itemElement["offset"+aT];aK=t.measureFromPx(aS);if(aI.getMeasureRoundedToWholePixel().equals(aK)!==S){this.error=S}if(aU.position===H.absolute){if(aU.shrinkToFitSize===af){}aJ=(aP?aU.shrinkToFitSize.width:aU.shrinkToFitSize.height)}else{switch(aQ){case T.stretch:aL=(aF?aU.column:aU.row);e=(aF?aU.columnSpan:aU.rowSpan);aJ=this.getSumOfSpannedTrackMeasures(aG,aL,e);break;case T.start:case T.end:case T.center:if(aU.shrinkToFitSize===af){}aJ=(aP?aU.shrinkToFitSize.width:aU.shrinkToFitSize.height);break;default:}}if(aJ.equals(aI)!==S){if(P>0&&Math.abs(aJ.subtract(aI).getRawMeasure())===1){}else{this.error=S}}else{}if(aF){aU.verified.columnBreadth=S}else{aU.verified.rowBreadth=S}}else{}}},verifyGridItemPositions:function(e){this.verifyGridItemTrackPositions(e,S);this.verifyGridItemTrackPositions(e,A)}};function V(){this.number=af;this.size=af;this.sizingType=af;this.items=[];this.measure=af;this.minMeasure=af;this.maxMeasure=af;this.contentSizedTrack=A;this.implicit=A}function Q(){this.firstNumber=af;this.span=af;this.size=c.auto;this.sizingType=aA.keyword;this.items=[];this.measure=af}function D(){this.itemElement=af;this.styles=af;this.position=af;this.column=1;this.columnSpan=1;this.columnAlign=T.stretch;this.row=1;this.rowSpan=1;this.rowAlign=T.stretch;this.usedWidthMeasure=af;this.maxWidthMeasure=af;this.maxHeightMeasure=af;this.shrinkToFitSize=af;this.verified={columnBreadth:A,rowBreadth:A,columnPosition:A,rowPosition:A}}var p={calcMarginBoxWidth:function(aF){var aG=E(aF,z),e=t.measureFromStyleProperty(aF,I);e=e.add(t.measureFromStyleProperty(aF,K+an+b)).add(t.measureFromStyleProperty(aF,K+an+k));if(aG===aq){e=e.add(t.measureFromStyleProperty(aF,ab+an+b)).add(t.measureFromStyleProperty(aF,ab+an+k))}if(aG===aq||aG===Z){if(E(aF,av+an+b+g)!==X){e=e.add(t.measureFromStyleProperty(aF,av+an+b+an+I))}if(E(aF,av+an+k+g)!==X){e=e.add(t.measureFromStyleProperty(aF,av+an+k+an+I))}}return e},calcMarginBoxHeight:function(aF){var aG=E(aF,z),e=t.measureFromStyleProperty(aF,aw);e=e.add(t.measureFromStyleProperty(aF,K+an+l)).add(t.measureFromStyleProperty(aF,K+an+ar));if(aG===aq){e=e.add(t.measureFromStyleProperty(aF,ab+an+l)).add(t.measureFromStyleProperty(aF,ab+an+ar))}if(aG===aq||aG===Z){if(E(aF,av+an+l+g)!==X){e=e.add(t.measureFromStyleProperty(aF,av+an+l+an+I))}if(E(aF,av+an+ar+g)!==X){e=e.add(t.measureFromStyleProperty(aF,av+an+ar+an+I))}}return e},calcBoxWidthFromMarginBoxWidth:function(aF,e){var aH=E(aF,z),aG=e;if(aH===aq){aG=aG.subtract(t.measureFromStyleProperty(aF,ab+an+b).add(t.measureFromStyleProperty(aF,ab+an+k)))}if(aH===aq||aH===Z){if(E(aF,av+an+b+g)!==X){aG=aG.subtract(t.measureFromStyleProperty(aF,av+an+b+an+I))}if(E(aF,av+an+k+g)!==X){aG=aG.subtract(t.measureFromStyleProperty(aF,av+an+k+an+I))}}aG=aG.subtract(t.measureFromStyleProperty(aF,K+an+b).add(t.measureFromStyleProperty(aF,K+an+k)));return aG},calcBoxHeightFromMarginBoxHeight:function(aF,e){var aG=E(aF,z);boxHeight=e;if(aG===aq){boxHeight=boxHeight.subtract(t.measureFromStyleProperty(aF,ab+an+l).add(t.measureFromStyleProperty(aF,ab+an+ar)))}if(aG===aq||aG===Z){if(E(aF,av+an+l+g)!==X){boxHeight=boxHeight.subtract(t.measureFromStyleProperty(aF,av+an+l+an+I))}if(E(aF,av+an+ar+g)!==X){boxHeight=boxHeight.subtract(t.measureFromStyleProperty(aF,av+an+ar+an+I))}}boxHeight=boxHeight.subtract(t.measureFromStyleProperty(usedStyle,K+an+l).add(t.measureFromStyleProperty(usedStyle,K+an+ar)));return boxHeight}},M={zeroLength:{cssText:"0px"},infiniteLength:{cssText:"1000000px"},prepare:function(aL,aF,aO,aT){if(intrinsicSizeCalculatorElement===af){intrinsicSizeCalculatorElement=v.cloneNode(S);intrinsicSizeCalculatorElement.id="intrinsicSizeCalculator"}var aI=N,aK=aL.parentNode,aS,aG="font-",aP=aG+"family",aN=aG+"size",aH=aN+"-adjust",aJ=aG+ao,aR=aG+"style",aM=aG+"variant",aQ=aG+"weight",e="direction";if(!j(aO)&&aO!==af){aI+=I+at+aO.getPixelValueString()+Y+a}else{switch(aF){case ap.minWidth:case ap.maxHeight:aI+=I+at+this.zeroLength.cssText+a;break;case ap.minHeight:case ap.maxWidth:aI+=I+at+this.infiniteLength.cssText+a;break;case ap.shrinkToFit:break}}if(!j(aT)&&aT!==af){aI+=aw+at+aT.getPixelValueString()+Y+a}else{switch(aF){case ap.minWidth:case ap.maxHeight:aI+=aw+at+this.infiniteLength.cssText+a;break;case ap.minHeight:case ap.maxWidth:aI+=aw+at+this.zeroLength.cssText+a;break;case ap.shrinkToFit:break}}R=aK===document.body?aK:aK.parentNode;if(R!==aK){aI+=aP+at+E(aK,aP)+a+aN+at+E(aK,aN)+a+aH+at+E(aK,aH)+a+aJ+at+E(aK,aJ)+a+aR+at+E(aK,aR)+a+aM+at+E(aK,aM)+a+aQ+at+E(aK,aQ)+a+e+at+E(aK,e)+a+au+at+E(aK,au)+a}intrinsicSizeCalculatorElement.style.cssText+=aI;R.appendChild(intrinsicSizeCalculatorElement)},unprepare:function(){R.removeChild(intrinsicSizeCalculatorElement)},cloneAndAppendToCalculator:function(e){var aF=e.cloneNode(S);aF.style.cssText=aF.style.cssText+a+"float:left";intrinsicSizeCalculatorElement.appendChild(aF);return aF},calcMinWidth:function(e){this.prepare(e,ap.minWidth);var aG=this.cloneAndAppendToCalculator(e),aF=p.calcMarginBoxWidth(aG);intrinsicSizeCalculatorElement.removeChild(aG);this.unprepare();return aF},calcMaxWidth:function(e){this.prepare(e,ap.maxWidth);var aG=this.cloneAndAppendToCalculator(e),aF=p.calcMarginBoxWidth(aG);intrinsicSizeCalculatorElement.removeChild(aG);this.unprepare();return aF},calcMinHeight:function(aF,aG){if(j(aG)||aG===af){}this.prepare(aF,ap.minHeight,aG);var aH=this.cloneAndAppendToCalculator(aF),e=p.calcMarginBoxHeight(aH);intrinsicSizeCalculatorElement.removeChild(aH);this.unprepare();return e},calcMaxHeight:function(aF,aG){if(j(aG)||aG===af){}this.prepare(aF,ap.maxHeight,aG);var aH=this.cloneAndAppendToCalculator(aF),e=p.calcMarginBoxHeight(aH);intrinsicSizeCalculatorElement.removeChild(aH);this.unprepare();return e},calcShrinkToFitWidthAndHeight:function(aF,aL,aN,aG,e){if(aG!==af){aL=aG}if(e!==af){aN=e}this.prepare(aF,ap.shrinkToFit,aL,aN);var aI=this.cloneAndAppendToCalculator(aF),aJ=O.getComputedStyle(aI,af),aK=new aB(),aH,aM;if(aG!==af){aH=p.calcBoxWidthFromMarginBoxWidth(aI,aG);aI.style.cssText+=G+I+at+aH.getPixelValueString()+Y+a+aa+I+at+aH.getPixelValueString()+Y+a}if(e!==af){aM=p.calcBoxHeightFromMarginBoxHeight(aI,e);aI.style.cssText+=G+aw+at+aM.getPixelValueString()+Y+a+aa+aw+at+aM.getPixelValueString()+Y+a}aK.width=p.calcMarginBoxWidth(aI);aK.height=p.calcMarginBoxHeight(aI);intrinsicSizeCalculatorElement.removeChild(aI);this.unprepare();return aK}},al={zerostring:"0",parseGridTracksString:function(aH,aJ){var e=aH.split(ai),aK=e.length,aG,aF,aI;if(aK===1&&(e[0].length===0||e[0].toLowerCase()===X)){}else{for(aG=0;aG<aK;aG++){e[aG]=e[aG].toLowerCase();aF=af;if(this.isKeywordTrackDefinition(e[aG])){aF=new V();aF.number=aG+1;aF.size=GridTest.layoutVerifier.gridTrackValueStringToEnum(e[aG]);aF.sizingType=aA.keyword;aJ.addTrack(aF)}else{aI=this.tryParseCssValue(e[aG]);if(aI.value===af||aI.unit===af){}if(!this.isValidCssValueUnit(aI.unit)){}aF=new V();aF.number=aG+1;aF.size=aI;aF.sizingType=aA.valueAndUnit;aJ.addTrack(aF)}}}},tryParseCssValue:function(aF){var aH=/^(\d*\.?\d*)(.*)/,aG=aF.match(aH),e=new ac();if(aG[0].length>0&&aG[1].length>0&&aG[2].length>0){if(aG[1].indexOf(n)<0){e.value=parseInt(aG[1],10)}else{e.value=parseFloat(aG[1],10)}e.unit=aG[2]}return e},isValidCssValueUnit:function(aF){var e=A;switch(aF){case Y:case"%":case"pt":case"pc":case"in":case"cm":case"mm":case"em":case"ex":case"vh":case"vw":case"vm":case"ch":case"rem":case x:e=S}return e},isKeywordTrackDefinition:function(aF){var e=A;switch(aF){case c.auto.keyword:case c.minContent.keyword:case c.maxContent.keyword:case c.fitContent.keyword:e=S}return e}};function t(e){if(e%1!==0){}this.internalMeasure=e}t.measureFromPx=function(e){return new t(Math.round(e*Math.pow(10,P)))};t.measureFromPxString=function(aF){var aH=aF.length,e=0,aI=0,aG=aF.indexOf(n);aF=aF.substr(0,aF.length-2);if(aG>=0){aI=aF.substring(aG+1);while(aI.length<P){aI+=this.zerostring}aI=parseInt(aI,10)}if(aG!==0){e=aF.substring(0,aG>=0?aG:aH);e=parseInt(e,10)*Math.pow(10,P)}return new t(e+aI)};t.measureFromStyleProperty=function(e,aF){return this.measureFromPxString(E(e,aF))};t.zero=function(){return new t(0)};t.min=function(aF,e){return new t(Math.min(aF.internalMeasure,e.internalMeasure))};t.max=function(aF,e){return new t(Math.max(aF.internalMeasure,e.internalMeasure))};t.prototype={getRawMeasure:function(){return this.internalMeasure},getPixelValueString:function(){var e=Math.abs,aH=Mat.pow,aF,aI,aG,aJ;if(e(this.internalMeasure)<aH(10,P)){if(this.internalMeasure<0){aF=an+this.zerostring}else{aF=this.zerostring}}else{aI=this.internalMeasure+N;aF=aI.substr(0,aI.length-P)}aG=e(this.internalMeasure%aH(10,P));if(aG==0){aJ=N}else{aJ=aG+N}if(aJ.length==1){aJ=this.zerostring+aJ}if(aJ[1]===this.zerostring){aJ=aJ[0]}return aF+(aJ.length===0?N:(n+aJ))},getPixelValue:function(){return this.internalMeasure/Math.pow(10,P)},getMeasureRoundedToWholePixel:function(){var e=Math.abs,aH=Mat.pow,aG=e(this.internalMeasure%aH(10,P)),aF;if(aG>=5*aH(10,P-1)){aF=aH(10,P)-aG}else{aF=0-aG}if(this.internalMeasure<0){aF=0-aF}return new t(this.internalMeasure+aF)},add:function(e){if(!(e instanceof t)){}return new t(this.internalMeasure+e.internalMeasure)},subtract:function(e){if(!(e instanceof t)){}return new t(this.internalMeasure-e.internalMeasure)},multiply:function(e){if(typeof e!=="number"){}return new t(Math.floor(this.internalMeasure*e))},divide:function(e){if(typeof e!=="number"){}return new t(Math.floor(this.internalMeasure/e))},equals:function(e){if(!(e instanceof t)){}return this.internalMeasure===e.internalMeasure}};function aj(){this.tracks=[];this.implicitTrackRanges=[]}aj.prototype={addTrack:function(e){this.tracks.push(e)},getRangeLastTrackNumber:function(e){return e.firstNumber+e.span-1},makeRoomForExplicitTrack:function(e){var aH=0,aJ=this.implicitTrackRanges.length,aO,aG,aI,aF,aK,aN,aM,aL;for(;aH<aJ;aH++){aO=this.implicitTrackRanges[aH];aL=this.getRangeLastTrackNumber(aO);if(e>=aO.firstNumber&&e<=aL){aG=aH<aJ-1?af:this.implicitTrackRanges[aH+1];if(e===aO.firstNumber){if(aO.span===1){this.implicitTrackRanges.splice(aH,1)}else{aO.firstNumber+=1;aO.span-=1}}else{if(e===aL){aO.span-=1}else{aI=aO.firstNumber;aF=e-aO.firstNumber;aK=e+1;aN=aL-secondRangeFirstNumber+1;aO.firstNumber=secondRangeFirstNumber;aO.span=aN;aM=new Q();aM.firstNumber=firstRangeFirstNumber;aM.span=aF;this.implicitTrackRanges.splice(aH,0,aM)}}break}}},ensureFirstTrackExists:function(aG){this.makeRoomForExplicitTrack(aG);var aH=0,e=this.tracks.length,aF=new V();aF.number=aG;aF.sizingType=aA.keyword;aF.size=c.auto;aF.implicit=S;if(e===0||aG>this.tracks[e-1].number){this.addTrack(aF)}else{if(aG===this.tracks[e-1].number){}else{for(aH=0;aH<e;aH++){if(aG===this.tracks[aH].number){break}else{if(aG<this.tracks[aH].number){this.tracks.splice(aH,0,aF);break}}}}}},ensureTracksExist:function(aP,a6){var a3=aP,a4=a6,aW=this.tracks.length,aK=Math.min,aL=Math.max,aM,a1,aF,e,aS,aR,aV,aG,aO,aU,aN,a2,a0,aI,aY,aZ,aQ,a5,aH,aT,aX,aJ;this.ensureFirstTrackExists(aP);aP++;if(aP<=a6){aM=[];a1=aP;aF=a6;if(aW===0){aM.push({first:a1,last:aF})}for(e=0;e<aW;e++){if(a1>aF||this.tracks[e].number>aF){break}if(this.tracks[e].number>=a1&&this.tracks[e].number<=aF){if(a1===this.tracks[e].number){a1++}else{if(aF===this.tracks[e].number){aF--}else{aM.push({first:a1,last:this.tracks[e].number-1});a1=this.tracks[e].number+1}}}}if(a1<=aF){aM.push({first:a1,last:aF})}aS=0;aV=aM.length;for(aR=0;aR<aV;aR++){aO=aM[aR];aU=aO.first;aN=aO.last;a2=S;aG=this.implicitTrackRanges.length;for(;aS<aG;aS++){a0=this.implicitTrackRanges[aS];aI=a0.firstNumber;aY=getRangeLastTrackNumber(a0);if(aN<aI){break}else{if(aU>aY){continue}else{if(aU==aI&&aN==aY){a2=A;break}else{aZ=aK(aU,aI);aQ=aL(aU,aI)-aZ;a5=aZ+aQ;aH=aK(aN,aY)-a5;aT=a5+aH;aX=aL(aN,aY)-aT+1;if(aQ>0){aJ=new Q();aJ.firstNumber=aZ;aJ.span=aQ;this.implicitTrackRanges.splice(aS,0,aJ);aS++}if(aH>0){aJ=new Q();aJ.firstNumber=a5;aJ.span=aH;this.implicitTrackRanges.splice(aS,0,aJ);aS++}if(aX>0){aJ=new Q();aJ.firstNumber=aT;aJ.span=aX;this.implicitTrackRanges.splice(aS,0,aJ);aS++}this.implicitTrackRanges.splice(aS,1);a2=A;break}}}}if(a2){aJ=new Q();aJ.firstNumber=aU;aJ.span=aN-aU+1;if(aS>=this.implicitTrackRanges.length){this.implicitTrackRanges.push(aJ)}else{this.implicitTrackRanges.splice(aS,0,aJ)}}}}},getIterator:function(){return new am(this)},getTrack:function(aF){var aH,e=this.tracks.length,aG;while(e--){if(this.tracks[e].number<aF){break}if(aF==this.tracks[e].number){return this.tracks[e]}}e=this.implicitTrackRanges.length;for(aH=0;aH<e;aH++){aG=this.implicitTrackRanges[aH].firstNumber+this.implicitTrackRanges[aH].span-1;if(aF>=this.implicitTrackRanges[aH].firstNumber&&aF<=aG){return this.implicitTrackRanges[aH]}}},getTracks:function(aM,aL){var aH=[],aK=this.tracks,e=this.implicitTrackRanges,aF,aG,aI,aJ;for(aG=0,aI=aK.length;aG<aI;aG++){aF=aK[aG].number;if(aF>aL){break}if(aF>=aM&&aF<=aL){aH.push(aK[aG])}}for(aG=0,aI=e.length;aG<aI;aG++){aJ=e[aG].firstNumber+e[aG].span-1;if(aM>=e[aG].firstNumber&&aL<=aJ){aH.push(e[aG])}if(aJ>=aL){break}}if(aH.length===0){}return aH},spanIsInFractionalTrack:function(aF,aH){for(var aG=aF-1,e=this.tracks.length;aG<e&&aG<(aF+aH-1);aG++){if(GridTest.trackIsFractionSized(this.tracks[aG])){return S}}return A}};function am(e){this.trackManager=e;this.iteratingtracks=S;this.currentTrackIndex=0;this.currentImplicitTrackRangeIndex=0}am.prototype={reset:function(){this.iteratingtracks=S;this.currentTrackIndex=0;this.currentImplicitTrackRangeIndex=0},next:function(){var aG=af,aH=A,aF=this.trackManager,aI=aF.tracks,aM=aI.length,e=aF.implicitTrackRanges,aL=e.length,aK=this.currentTrackIndex,aJ=this.currentImplicitTrackRangeIndex;if(aK>=aM){aH=S}else{if(aJ<aL){if(e[aJ].firstNumber<aI[aK].number){aH=S}}}if(aH&&aJ<aL){aG=e[aJ];this.currentImplicitTrackRangeIndex++}else{if(aK<aM){aG=aI[aK];this.currentTrackIndex++}}return aG}}})(eCSStender);